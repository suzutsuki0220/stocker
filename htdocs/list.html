<!DOCTYPE html>
<html lang="ja" class="has-navbar-fixed-top">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script type="text/javascript" src="bundle/stocker.js"></script>
<script type="text/javascript" src="javascript/print_icons.js"></script>
<script type="text/javascript" src="javascript/list.js"></script>
<script type="text/javascript" src="javascript/get_directory_list.js"></script>
<script type="text/javascript" src="javascript/action.js"></script>
<link rel="stylesheet" type="text/css" href="stylesheet/list.css">
</head>

<body>
  <nav class="navbar is-link is-fixed-top" role="navigation">
    <div class="navbar-brand"> <!-- left side of the navbar -->
      <h1 class="navbar-item" id="fileNameArea">Stocker</h1>
      <a role="button" class="navbar-burger" href="#">
        <span aria-hidden="true"></span><!-- It has to contain three empty spans (bulma needs)-->
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>
    <div class="navbar-menu">
      <div class="navbar-start">
        <div class="navbar-item">
          <div class="field">
            <p class="control has-icons-left">
              <input class="input" type="text" placeholder="絞り込み">
              <span class="icon is-small is-left">
                <i class="fas fa-filter"></i>
              </span>
            </p>
          </div>
        </div>
      </div>
      <div class="navbar-end">
        <a class="navbar-item" title="新規フォルダー作成"><i class="fas fa-folder-plus" style="color: #ffffff"></i></a>
        <a class="navbar-item" title="アップロード"><i class="fas fa-upload"></i></a>
        <a class="navbar-item" title="ダウンロード"><i class="fas fa-download"></i></a>
        <a class="navbar-item" title="削除"><i class="fas fa-trash"></i></a>
        <a class="navbar-item" title="名前の変更"><i class="fas fa-file-signature"></i></a>
        <a class="navbar-item" title="移動"><i class="fas fa-shipping-fast"></i></a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link is-arrowless"><i class="fas fa-ellipsis-v"></i></a>
          <div class="navbar-dropdown is-right" id="action-drop-list"></div>
        </div>
      </div>
    </div>
  </nav>
  <nav class="navbar is-light is-fixed-bottom" role="navigation">
  </nav>
<form action="#" name="file_check" method="POST">
<input type="hidden" name="mode" value="">
<input type="hidden" name="target" value="${in_file}">
<input type="hidden" name="dir" value="${encoded_dir}">
<div id="editParam"></div>
<a href="index.html"><i class="fas fa-home"></i></a>
<select name="fm_dir" id="fm_dir" size="1" onChange="changeDirectory()"></select>
<span id="path_link"></span>

<div style="clear: both">
  <span style="float: left">
    <input type="text" name="search" size="20" maxlength="64" value="">
    <input type="button" value="表示絞込み">
  </span>
  <span id="action_list" style="float: right"></span>
</div>
<div id="uppath"></div>

<!--
my @dir_list = ();
#while (my $entry = decode('utf-8', readdir $DIR)) {
#  if( length($entry) > 0 && $entry ne '..'  && $entry !~ /^\./ && $entry ne 'lost+found') {
#    # 絞込みが指定された場合、マッチしない物はリストに入れない
#    if( ${in_search} && $entry !~ /${in_search}/i ) {
#      next;
#    }
#    push(@dir_list, $entry);
#  }
#}
@dir_list = sort {$a cmp $b} @dir_list;

my @un_visible_list = ();
my @visible_list = ();
my $cont_from = 0;

my $cont_to = $#dir_list;
if(length(${in_to}) > 0 && ${in_to} > 0) {
  $cont_to = $in_to -1;
}
-->

<p id="directoryListArea"></p>
<p class="partition">&nbsp;</p>
</form>

<div class="modal">
  <div class="modal-background"></div>
  <div class="modal-content">
    <!-- Any other Bulma elements you want -->
  </div>
  <button class="modal-close is-large" aria-label="close"></button>
</div>

<div class="modal">
  <div class="modal-background"></div>
  <div class="modal-card">
    <header class="modal-card-head">
      <p class="modal-card-title">Modal title</p>
    </header>
    <section class="modal-card-body">
      <!-- Content ... -->
     some contents
    </section>
    <footer class="modal-card-foot">
      <button class="button is-success">Save changes</button>
      <button class="button">Cancel</button>
    </footer>
  </div>
</div>

<!--
## 操作  TODO: remove

操作:
<select name="operation" size="1" onChange="act()">
<option value="nop">-- 操作を選択 --</option>
<optgroup label="選択">
<option value="allCheck">全項目選択</option>
<option value="allUnCheck">全ての選択を解除</option>
</optgroup>
<optgroup label="編集">
<option value="resize">縮小版を作成</option>
<option value="convert">変換</option>
<option value="combine">画像/動画を結合</option>
<option value="divide">画像を分離</option>
</optgroup>
<optgroup label="操作">
<option value="newfolder">新規フォルダー作成</option>
<option value="upload">アップロード</option>
<option value="download">ダウンロード</option>
<option value="delfile">削除</option>
<option value="rename">名前の変更</option>
<option value="move">移動</option>
</optgroup>
</select>

-->
<script type="text/javascript">
<!--
function act() {
  var sw = document.file_check.operation.value;
  document.file_check.dir.value = document.file_check.fm_dir.value;
  document.file_check.operation.options[0].selected = true;  // 変更後はnopに
  switch (sw) {
    case "allCheck":
      allCheck();
      break;
    case "allUnCheck":
      allUnCheck();
      break;
    case "resize":
      document.file_check.mode.value = "resize";
      document.file_check.action = stocker.uri.cgi.edit;
      document.file_check.submit();
      break;
    case "convert":
      document.file_check.mode.value = "convert";
      document.file_check.action = stocker.uri.cgi.converter.form;
      document.file_check.submit();
      break;
    case "combine":
      document.file_check.mode.value = "combine";
      document.file_check.action = stocker.uri.cgi.edit;
      document.file_check.submit();
      break;
    case "divide":
      document.file_check.mode.value = "divide";
      document.file_check.action = stocker.uri.cgi.edit;
      document.file_check.submit();
      break;
    case "newfolder":
      document.file_check.mode.value = "newfolder";
      document.file_check.action = stocker.uri.cgi.filefunc;
      document.file_check.submit();
      break;
    case "upload":
      document.file_check.mode.value = "upload";
      document.file_check.action = stocker.uri.cgi.filefunc;
      document.file_check.submit();
      break;
    case "download":
      downloadWork(params.dir);
      break;
    case "delfile":
      document.file_check.mode.value = "delfile";
      document.file_check.action = stocker.uri.cgi.filefunc;
      document.file_check.submit();
      break;
    case "rename":
      document.file_check.mode.value = "rename";
      document.file_check.action = stocker.uri.cgi.filefunc;
      document.file_check.submit();
      break;
    case "move":
      var elem = document.createElement("f_dest");
      elem.innerHTML = '<input type="hidden" name="f_dest" value="${in_file}">'
                     + '<input type="hidden" name="f_dest_dir" value="" + params.dir + "">';
      document.getElementById("editParam").appendChild(elem);
      document.file_check.mode.value = "move";
      document.file_check.action = stocker.uri.cgi.filefunc;
      document.file_check.submit();
      break;
  }
}
-->
</script>

</body>
</html>

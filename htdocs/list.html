<!DOCTYPE html>
<html lang="ja" class="has-navbar-fixed-top">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta name="format-detection" content="telephone=no">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<script type="text/javascript" src="bundle/stocker.js"></script>
<script type="text/javascript" src="javascript/action_form.js"></script>
<script type="text/javascript" src="javascript/filefunc.js"></script>
<script type="text/javascript" src="javascript/modal_content.js"></script>
<script type="text/javascript" src="javascript/print_icons.js"></script>
<script type="text/javascript" src="javascript/list.js"></script>
<script type="text/javascript" src="javascript/get_directory_list.js"></script>
<script type="text/javascript" src="javascript/action.js"></script>
<link rel="stylesheet" type="text/css" href="stylesheet/list.css">
</head>

<body>
  <nav class="navbar is-link is-fixed-top" role="navigation">
    <div class="navbar-brand"> <!-- left side of the navbar -->
      <h1 class="navbar-item" id="fileNameArea">Stocker</h1>
      <a role="button" class="navbar-burger burger" aria-label="menu" data-target="menu" id="burger" href="javascript:toggleNavBurger()">
        <span aria-hidden="true"></span><!-- It has to contain three empty spans (bulma needs)-->
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>
    <div class="navbar-menu" id="menu">
      <div class="navbar-start">
        <div class="navbar-item">
          <div class="field has-addons">
            <p class="control">
              <input class="input" id="narrow" type="text" placeholder="絞り込み">
            </p>
            <p class="control">
              <a class="button" href="javascript:clearNarrowList()"><i class="fas fa-times"></i></a>
            </p>
            <p class="control">
              <a class="button is-info" href="javascript:narrowList()"><i class="fas fa-sync"></i></a>
            </p>
          </div>
        </div>
      </div>
      <div class="navbar-end">
        <a class="navbar-item" title="新規フォルダー作成" href="javascript:modalContent.newFolder()"><i class="fas fa-folder-plus"></i></a>
        <a class="navbar-item" title="アップロード"><i class="fas fa-upload"></i></a>
        <a class="navbar-item" title="ダウンロード" href="javascript:downloadWork()"><i class="fas fa-download"></i></a>
        <a class="navbar-item" title="削除" href="javascript:modalContent.remove()"><i class="fas fa-trash"></i></a>
        <a class="navbar-item" title="名前の変更" href="javascript:modalContent.rename()"><i class="fas fa-file-signature"></i></a>
        <a class="navbar-item" title="移動" href="javascript:modalContent.move()"><i class="fas fa-shipping-fast"></i></a>
        <a class="navbar-item" title="全て選択" href="javascript:allCheck(true)"><i class="fas fa-check-square"></i>ALL</a>
        <a class="navbar-item" title="選択解除" href="javascript:allCheck(false)"><i class="fas fa-square"></i>CLEAR</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link is-arrowless"><i class="fas fa-ellipsis-v"></i></a>
          <div class="navbar-dropdown is-right" id="action-drop-list"></div>
        </div>
      </div>
    </div>
  </nav>
  <nav class="navbar is-light is-fixed-bottom" role="navigation">
  </nav>
<form action="#" name="file_check" method="POST">
<input type="hidden" name="mode" value="">
<input type="hidden" name="target" value="${in_file}">
<input type="hidden" name="dir" value="${encoded_dir}">
<a href="index.html"><i class="fas fa-home"></i></a>
<span id="root_selector"></span>
<span id="path_link"></span>

<div style="clear: both">
  <span id="action_list" style="float: right"></span>
</div>
<div id="uppath"></div>

<!--
my @dir_list = ();
#while (my $entry = decode('utf-8', readdir $DIR)) {
#  if( length($entry) > 0 && $entry ne '..'  && $entry !~ /^\./ && $entry ne 'lost+found') {
#    # 絞込みが指定された場合、マッチしない物はリストに入れない
#    if( ${in_search} && $entry !~ /${in_search}/i ) {
#      next;
#    }
#    push(@dir_list, $entry);
#  }
#}
@dir_list = sort {$a cmp $b} @dir_list;

my @un_visible_list = ();
my @visible_list = ();
my $cont_from = 0;

my $cont_to = $#dir_list;
if(length(${in_to}) > 0 && ${in_to} > 0) {
  $cont_to = $in_to -1;
}
-->

<p id="directoryListArea"></p>
<p class="partition">&nbsp;</p>
</form>

<!--
## 操作  TODO: remove

操作:
<select name="operation" size="1" onChange="act()">
<option value="nop">-- 操作を選択 --</option>
<optgroup label="編集">
<option value="resize">縮小版を作成</option>
<option value="convert">変換</option>
<option value="combine">画像/動画を結合</option>
<option value="divide">画像を分離</option>
</optgroup>
</select>

-->
<script type="text/javascript">
<!--
function act() {
  var sw = document.file_check.operation.value;
  document.file_check.dir.value = document.file_check.fm_dir.value;
  document.file_check.operation.options[0].selected = true;  // 変更後はnopに
  switch (sw) {
    case "resize":
      document.file_check.mode.value = "resize";
      document.file_check.action = stocker.uri.cgi.edit;
      document.file_check.submit();
      break;
    case "convert":
      document.file_check.mode.value = "convert";
      document.file_check.action = stocker.uri.cgi.converter.form;
      document.file_check.submit();
      break;
    case "combine":
      document.file_check.mode.value = "combine";
      document.file_check.action = stocker.uri.cgi.edit;
      document.file_check.submit();
      break;
    case "divide":
      document.file_check.mode.value = "divide";
      document.file_check.action = stocker.uri.cgi.edit;
      document.file_check.submit();
      break;
  }
}
-->
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="ja" class="has-navbar-fixed-top">
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Script-Type" content="text/javascript">
<meta http-equiv="Content-Style-Type" content="text/css">
<meta name="format-detection" content="telephone=no">
<script type="text/javascript" src="../bundle/stocker.js"></script>
<script type="text/javascript" src="../javascript/action_form.js"></script>
<script type="text/javascript" src="../javascript/get_directory_list.js"></script>
<script type="text/javascript">
function execute() {
    changeStatus(0, "done");
    changeStatus(1, "error");
    changeStatus(2, "warning");
    changeStatus(3, "info");
    changeStatus(4, "loading");
}

function onGetName(names) {
    if (names.length !== 0) {
        setBackToStocker(names[0]);
        filenameTable(document.getElementById('filesArea'), names);
    }
}

function changeStatus(listNumber, stat) {
    const elem = document.getElementById('status_' + listNumber);
    if (elem) {
        elem.innerHTML = bulmaRender.statusIcon[stat];
    }
}

</script>
</head>
<body>
  <nav class="navbar is-link is-fixed-top" role="navigation" aria-label="main navigation">
    <div class="navbar-brand"> <!-- left side of the navbar -->
      <a href="#" id="backAnchor" class="navbar-item"><i class="fas fa-arrow-left"></i></a>
      <h1 class="navbar-item">縮小画像作成</h1>
    </div>
<!--
    <div class="navbar-menu">
      <div class="navbar-start">
      </div>
      <div class="navbar-end">
      </div>
    </div>
-->
  </nav>
  <section class="section">
    <div class="container">
      <h1 class="title is-5">出力先</h1>
      <h2 class="subtitle is-6">ディレクトリ名: <span id="outputDirectoryArea"></span></h2>
      <select id="directorySelectorArea"></select>
      <a class="button is-primary" href="javascript:execute()">実行</a>
      <a class="button" id="cancelButton">キャンセル</a>
    </div>
  </section>
  <section class="section">
    <div class="container">
      <h1 class="title is-5">選択</h1>
      <h2 class="subtitle is-6"><span id="filesCountArea"></span>ファイル</h2>
      <table class="table" id="filesArea"></table>
    </div>
  </section>

<script>
    const files = stocker.components.getParamFile();

    if (files.length === 0) {
        bulmaRender.notification("error", "ファイルが選択されていません");
    }

    document.getElementById('filesCountArea').innerText = files.length;
    document.getElementById('filesArea').innerHTML = "読み込み中...";
    stocker.components.getFilenames(onGetName);
    getRootDirectories(function(data) {
        makeDirectoryList(document.getElementById('directorySelectorArea'), data);
    });
</script>
</body>
</html>
